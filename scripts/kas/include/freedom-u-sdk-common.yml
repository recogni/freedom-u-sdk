header:
  version: 11

build_system: oe

repos:

  bitbake:
    url: https://git.openembedded.org/bitbake
    refspec: 6e99d89f3c00a5f53c24d687eaef24f52fe0ef99
    layers:
      .: excluded

  freedom-u-sdk:

  openembedded-core:
    url: https://git.openembedded.org/openembedded-core
    refspec: 2a86ca028980b501e386f6bb8293a094fd77f97b
    layers:
      meta:

  meta-clang:
    url: https://github.com/kraj/meta-clang.git
    refspec: e7b3acb82f4c4422e57884ad9427fba6bd020e8b
    layers:
      .:

  meta-sifive:
    url: https://github.com/sifive/meta-sifive.git
    refspec: c76b32132347c4ee67fdd77926e3900ec57c0daf
    layers:
      .:

  meta-openembedded:
    url: https://git.openembedded.org/meta-openembedded
    refspec: f3cdc9d7ee7e6a65f409e51a7a6a809ed7e96c6e
    layers:
      meta-filesystems:
      meta-gnome:
      meta-multimedia:
      meta-networking:
      meta-python:
      meta-oe:
      meta-xfce:

  meta-tensorflow:
    url: https://git.yoctoproject.org/meta-tensorflow
    refspec: e870f2b84433910b9d01152965c1d83ac6f5b060
    layers:
      .:
    patches:
      quilt:
        repo: freedom-u-sdk
        path: scripts/kas/patches/meta-tensorflow/

  meta-virtualization:
    url: https://git.yoctoproject.org/meta-virtualization
    refspec: 56494933803b4347a37ea5e264e9c088ef4a676e
    layers:
      .:

distro: freedom-u-sdk

env:
    TEMPLATECONF: ../freedom-u-sdk/conf/templates/default

local_conf_header:
  freedom-u-sdk-common: |
    USER_CLASSES:append = " buildhistory buildstats buildstats-summary"
    INHERIT:append = " rm_work"
    RM_OLD_IMAGE = "1"

  qemu-native: |
    PACKAGECONFIG:append:pn-qemu-system-native = " sdl"
    PACKAGECONFIG:append:pn-nativesdk-qemu = " sdl"

  sdk: |
    CONF_VERSION = "2"

  tensorflow: |
    BAZEL_TARGET_CPU = "riscv64"
